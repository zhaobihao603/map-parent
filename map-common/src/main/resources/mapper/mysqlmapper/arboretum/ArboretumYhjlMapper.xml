<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.imap.cloud.common.dao.arboretum.ArboretumYhjlMapper">

  <resultMap type="ArboretumYhjl" id="arboretumYhjlResultMap">
	<id property="id" column="id" jdbcType="CHAR" />
  	<result property="operation" column="operation" jdbcType="VARCHAR"/>
  	<result property="dateTime" column="dateTime" jdbcType="VARCHAR"/>
  	<result property="zid" column="zid" jdbcType="CHAR"/>
  	<result property="remarks" column="remarks" jdbcType="VARCHAR"/>
  </resultMap>
  
  <select id="selectAll" parameterType="ArboretumYhjl" resultMap="arboretumYhjlResultMap">
  	select * from arboretum_zbglyhjl z
  	<where>
  		<if test="dateTime != null and dateTime != '' ">
	  	  and dateTime &gt;= date_format(#{dateTime},'%Y-%m-%e')
	  	</if>
  	    <if test="operation != null and operation != '' ">
	  	  and operation like CONCAT('%',#{operation},'%')
	  	</if>
  	</where>
  </select>
  
  <select id="selectByPk" parameterType="String" resultMap="arboretumYhjlResultMap">
  	select y.id,y.operation,y.remarks,y.dateTime,z.personCharge zid from arboretum_zbglyhjl y left join arboretum_zbgl z 
	ON y.zid = z.id where y.id = #{id}
  </select>
  
  <select id="selectFindZbglCuring" parameterType="String" resultMap="arboretumYhjlResultMap">
  	select * from arboretum_zbglyhjl z where z.zid = #{fid} order by z.dateTime desc
  </select>
  
  <delete id="deleteByPk" parameterType="String">
   delete from arboretum_zbglyhjl where id = #{id}
  </delete>
  
  <insert id="insertSelective" parameterType="ArboretumYhjl">
  	insert into arboretum_zbglyhjl(id,operation,dateTime,zid,remarks)
  	values(#{id},#{operation},#{dateTime},#{zid},#{remarks})
  </insert>
  
  <update id="updateByPkSelective" parameterType="ArboretumYhjl">
  	update arboretum_zbglyhjl
  	<set>
  		<if test="operation != null and operation != '' ">operation = #{operation},</if>
  		<if test="remarks != null and remarks != '' ">remarks = #{remarks},</if>
  		<if test="dateTime != null and dateTime != '' ">dateTime = #{dateTime},</if>
  	</set>
  	where id = #{id}
  </update>
  
</mapper>