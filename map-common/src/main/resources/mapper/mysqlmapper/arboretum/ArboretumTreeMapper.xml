<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.imap.cloud.common.dao.arboretum.ArboretumTreeMapper">

  <resultMap type="ArboretumTree" id="arboretumTreeResultMap">
  	<id property="id" column="id" jdbcType="CHAR" />
  	<result property="text" column="text" jdbcType="VARCHAR"/>
  	<result property="state" column="state" jdbcType="VARCHAR"/>
  	<result property="parentId" column="parentId" jdbcType="CHAR"/>
  </resultMap>
  
  <select id="selectAll" resultMap="arboretumTreeResultMap">
  	select * from arboretum_tree t where t.parentId is null or t.parentId = ''
  </select>
  
  <select id="findAllTree" resultMap="arboretumTreeResultMap">
  	<![CDATA[
  		select * from arboretum_tree t where t.parentId is not null and t.parentId <> ''
  	]]>
  </select>
  
  <select id="selectByPkList" parameterType="String" resultMap="arboretumTreeResultMap">
  	select * from arboretum_tree t where t.parentId = #{id}
  </select>
  
  <update id="updateByPKParentNode" parameterType="String">
    update arboretum_tree set state = "closed" where id = #{parentId}
  </update>
  
  <update id="updateByPkSelective" parameterType="ArboretumTree" >
     update arboretum_tree  
     <set>
	     <if test="parentId != null">
	    	 parentId = #{parentId},
	     </if>
	     <if test="text != null">
	    	 text = #{text},
	     </if>
	     <if test="state != null">
	    	 state = #{state}
	     </if>
     </set>
     where id = #{id}
  </update>
  
  <select id='selectByPkTwo' resultMap="arboretumTreeResultMap">
   select * from arboretum_tree o where o.id = #{id}
  </select>
  
  <delete id="deleteByPk" parameterType="String">
  	delete FROM  arboretum_tree where id = #{id}
  </delete>
  
  <delete id="deleteByPkForEachSubNode" >
    delete from arboretum_tree where id in
  	<foreach collection="list" item="list" open="(" close=")" separator=",">
		 #{list}
	</foreach>
  </delete>
  
   <insert id="insertSelective" parameterType="ArboretumTree" >
  	insert into arboretum_tree
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="text != null">
        text,
      </if>
      <if test="state != null">
        state,
      </if>
      <if test="parentId != null">
        parentId,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=CHAR},
      </if>
      <if test="text != null">
        #{text,jdbcType=VARCHAR},
      </if>
      <if test="state != null">
        #{state,jdbcType=VARCHAR},
      </if>
      <if test="parentId != null">
        #{parentId,jdbcType=CHAR},
      </if>
    </trim>
  </insert>
  
</mapper>